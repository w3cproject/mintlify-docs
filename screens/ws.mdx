---
title: Веб сокеты
description: Описание работы вебсокетов с раундами
icon: 'shop'
---

## Как подключиться к раунду

Подключиться к раунду можно с помощью `webSocket` по API `/ws/rounds/{id}` по `ID` раунда.

<Note>
  Каждое соединение юзера должно быть с его `access_token` в `query` запросе.
</Note>

Пример:

```
ws://api-dev.monyfix.tech/ws/rounds/5fceec3c-beab-48ef-bd0a-cf3f7722f12e?token=userAccessToken
```

Каждый ответ сопровождается `json` сообщением с `type` и `message`.

```json
{
  "type": "error", // тип события
  "message": "message" // описание
}
```

| Type | Message | Условие
| -------- | ------- | ------------ |
| `error`     | Раунд не найден | Если раунд не найден по `id` |
| `error`      | Вы не являетесь участником этого раунда | Если пользователь не является участником этого раунда |
| `status_update`      | Участник `user_id` готов! | Когда статус участника изменился на `READY` |
| `status_update`   | Раунд начинается! | Когда все участники готовы и статус раунда меняется с `WAITING_FOR_PLAYERS` на `COUNTDOWN` (таймер) |
| `answer`   | `user_id` ответил: `answer` | При ответе каждого участника |
| `status_update`   | Участник `user_id` отключился | При отключении участника |
